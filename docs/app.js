var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&'function'==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?'symbol':typeof d};(function(){'use strict';function d(ya,za){switch('undefined'==typeof ya?'undefined':_typeof(ya)){case'boolean':case'number':return void za(ya.toString());case'string':return void za(ya);}if(ya instanceof Blob){var Aa=function(){var Ba=new FileReader;return Ba.onload=function(){za(Ba.result)},Ba.readAsText(ya),{v:void 0}}();if('object'===('undefined'==typeof Aa?'undefined':_typeof(Aa)))return Aa.v}za(JSON.stringify(ya))}function e(ya,za,Aa){var Ba=new XMLHttpRequest;return za&&(Ba.responseType=za),Ba.open('GET',ya),Ba.onload=function(){if(Ba.response&&200<=Ba.status&&300>Ba.status||304===Ba.status)return void Aa(!1,Ba.response,Ba);var Ca='Server returned an error ('+Ba.status;Ba.statusText&&(Ca+=' '+Ba.statusText),Ca+=')',d(Ba.response||'',function(Da){Da&&(Ca+=':\n'+Da),Aa(Ca,Ba.response,Ba)})},Ba.onerror=function(){Aa(Ba.status||Ba.statusText||'Unknown client error',Ba.response,Ba)},Ba.onabort=function(){Aa('Aborted by user',Ba.response,Ba)},Ba.ontimeout=function(){Aa('Request timed out',Ba.response,Ba)},Ba.send(),Ba}function f(ya,za){za===void 0?localStorage.removeItem(ya):localStorage.setItem(ya,JSON.stringify(za))}function g(ya){var za=localStorage.getItem(ya);return null==za?void 0:JSON.parse(za)}function h(ya){return ya=ya.replace(/^-+|-+$/g,''),ya=ya.replace(/-+/g,'-'),ya=ya.replace(/-(.)/g,function(za,Aa){return Aa.toUpperCase()}),ya}function j(ya){return!('number'!=typeof ya)&&(isNaN(ya)||!isFinite(ya)?!1:0>ya||ya>=U.length?!1:!('object'!==_typeof(U[ya])))}function k(ya){return!S.some(function(za){return za.test(ya)})}function l(ya){return T.some(function(za){return za.test(ya)})}function n(ya,za){j(za)||(za=W);var Aa=U[za][1];return Aa=Aa.replace(/%u/g,ya),Aa}function o(ya,za){return k(ya)&&!l(ya)?n(ya,za):ya}function p(ya,za){var Aa=2<arguments.length&&arguments[2]!==void 0?arguments[2]:'sameType';if(ya===void 0)return za;if(Aa)switch('undefined'==typeof Aa?'undefined':_typeof(Aa)){case'string':{var Ba='sameType'===Aa?'undefined'==typeof za?'undefined':_typeof(za):Aa;if(('undefined'==typeof ya?'undefined':_typeof(ya))!==Ba)return za}break;case'function':if(!Aa(ya))return za;}return ya}function q(ya,za){var Aa=2<arguments.length&&void 0!==arguments[2]?arguments[2]:'sameType',Ba=g(ya),Ca=p(Ba,za,Aa);return f(ya,Ca),Ca}function t(){aa.classList.add('fx-fade-hidden')}function u(){ba.style.display='initial'}function w(){ba.style.display='none'}function x(ya,za){var Aa=document.createElement('canvas');return Aa.width=ya,Aa.height=za,Aa.getContext('2d')}function y(ya,za){function Ba(Ca){var Da=new FileReader;Da.onload=function(){var Ea=new Uint8Array(Da.result),Fa=new PNG(Ea),Ga=Fa.width,Ha=Fa.height,Ia=x(Ga,Ha),Ja=Ia.createImageData(Ga,Ha);Fa.copyToImageData(Ja,Fa.decodePixels()),Ca(Ja)},Da.readAsArrayBuffer(ya)}(function(Ca){if(8>=ya.size)return Ca(!1);var Da=ya.slice(0,8),Ea=new FileReader;Ea.onload=function(){var Fa=new Uint32Array(Ea.result);return 1196314761!==Fa[0]||169478669!==Fa[1]?void Ca(!1):void Ca(!0)},Ea.readAsArrayBuffer(Da)})(function(Ca){return Ca?void Ba(za):void za(!1)})}function z(ya,za){console.info('Using HTML + Canvas to load the image.\nThis may results in unproper output.');var Aa=URL.createObjectURL(ya),Ba=new Image;Ba.onload=function(){URL.revokeObjectURL(Aa);var Ca=Ba.naturalWidth||Ba.width,Da=Ba.naturalHeight||Ba.height,Ea=x(Ca,Da);Ea.globalCompositeOperation='copy',Ea.drawImage(Ba,0,0);var Fa=Ea.getImageData(0,0,Ca,Da);za(Fa)},Ba.onerror=function(){Ba.onload=null,URL.revokeObjectURL(Aa),za(!1)},Ba.src=Aa}function A(ya,za){var Aa=[y,z];(function Ba(){if(0===Aa.length)return void za(!1);var Ca=Aa.shift();Ca(ya,function(Da){return Da?void za(Da):void Ba()})})()}function B(){ea.classList.add('fx-fade-hidden')}function C(){F(),ea.classList.remove('fx-fade-hidden')}function D(){B(),oa.src='',pa.src='',oa.classList.add('fx-fade-hidden'),pa.classList.add('fx-fade-hidden'),ma.classList.remove('fx-fade-hidden'),na.classList.remove('fx-fade-hidden')}function E(ya){function za(){na.classList.add('fx-fade-hidden'),oa.click()}oa.classList.remove('fx-fade-hidden'),function(){var Aa=URL.createObjectURL(ya);oa.onload=function(){URL.revokeObjectURL(Aa)},oa.src=Aa}(),A(ya,function(Aa){if(!Aa)throw new Error('Unsupported format');for(var Fa=3;Fa<Aa.data.length;Fa+=4)Aa.data[Fa]=255;var Ba=Aa.width,Ca=Aa.height,Da=document.createElement('canvas');Da.width=Ba,Da.height=Ca;var Ea=Da.getContext('2d');Ea.putImageData(Aa,0,0),Da.toBlob(function(Fa){var Ga=URL.createObjectURL(Fa);pa.onload=function(){URL.revokeObjectURL(Ga),za()},pa.src=Ga},'image/png')})}function F(){ma.classList.add('fx-fade-hidden')}function G(ya,za){var Aa=2<arguments.length&&arguments[2]!==void 0&&arguments[2],Ba='';Aa?history.replaceState(za,Ba,ya):history.pushState(za,Ba,ya),I()}function H(){function ya(Ea){return /^[%\w.!~*'()-]+$/.test(Ea)&&!/%.?([^\da-f]|$)/i.test(Ea)?decodeURIComponent(Ea):Ea}var Ba=function(){var Ea=location.search.substr(1);if(Ea){if(/^.*=/.test(Ea)){var Fa=Ea.match(/^.*?=(.*?)(?:&|$)/);if(!Fa)return;Ea=Fa[1],Ea=decodeURIComponent(Ea)}else Ea=ya(Ea);return Ea}}()||function(){function Ea(Ga){return Ga.replace(/^[!?#]+/,'')}var Fa=location.hash.substr(1);if(Fa)return Fa=Ea(ya(Ea(Fa))),Fa}();if(Ba){var Ca;{var Ea=Ba.match(/^(?:(\d+)|\*)?;(.*)$/);if(Ea){if(!Ea[1])return{isEphemeral:!0,url:Ba};Ca=parseInt(Ea[1],10),Ba=Ea[2]}}if(void 0===Ca||j(Ca)||(Ca=null),!k(Ba))return{isEphemeral:!1,url:Ba};Ba=Ba.replace(/^(?:(?:(?:h?t)?t)?p)?(s)?(?=:)/i,function(Ea,Fa){return Ea&&'http'+(Fa||'')});var Da=function(Ea){return~Ea?Ba.substr(0,Ea).toLowerCase():void 0}(Ba.indexOf(':'));if(Da&&'http'!==Da&&'https'!==Da)throw new Error('Unsupported protocol: '+Da);return Da||(console.info('Protocol not specified, assumed as '+V),Ba=Ba.replace(/^:?\/*/,V)),void 0===Ca?{isEphemeral:!1,url:Ba}:{isEphemeral:!1,proxyId:Ca,url:Ba}}}function I(){function ya(Ca,Da){j(Da)||(Da=W);var Ea=document.getElementById('retry-with-selector'),Fa=Ea.getElementsByTagName('option');Array.from(Fa).find(function(Ha){return parseInt(Ha.value,10)===Da}).selected=!0;var Ga=o(Ca,Da);D(),u(),e(Ga,'blob',function(Ha,Ia,Ja){if(Ha)throw console.log(Ja),new Error(Ha);E(Ia)})}var Aa=history,Ba=Aa.state;if(sa=H(),console.log(Ba,sa),Ba!==qa||location.href!==ra)if(qa=Ba,ra=location.href,t(),Ba)Ba.blob?function(Ca){D(),w(),E(Ca)}(Ba.blob):ya(Ba.url,Ba.proxyId);else{if(!sa||!sa.url||sa.isEphemeral)return location.hash||location.search?void J(!0):void C();if(null===sa.proxyId)return void L(sa.url,null,!0);ya(sa.url,sa.proxyId)}}function J(){var ya=0<arguments.length&&arguments[0]!==void 0&&arguments[0];G('./',null,ya)}function K(){0<arguments.length&&arguments[0]!==void 0?arguments[0]:!0;ra=null,I()}function L(ya,za){var Ca=2<arguments.length&&arguments[2]!==void 0&&arguments[2],Da=('string'==typeof ya?function(Fa,Ga){var Ha=j(Ga),Ia={url:Fa};return Ha&&(Ia.proxyId=Ga),{url:(Ha?Ga+';':'')+Fa,state:Ia}}:function(Fa,Ga){return Fa=Fa.slice(),{url:'*;local:'+Ga,state:{blob:Fa}}})(ya,za),Ea='./'+(X?'#':'?')+Da.url;G(Ea,Da.state,Ca)}function M(ya){return Array.from(ya.types).some(function(za){return /^Files$|^image\/|^text\/uri-list\b/i.test(za)})}function N(ya){xa++||!M(ya.dataTransfer)||wa.classList.remove('fx-fade-hidden')}function O(){--xa||wa.classList.add('fx-fade-hidden')}function P(ya){ya.preventDefault(),ya.stopPropagation();var za=ya.dataTransfer;za.dropEffect=za.effectAllowed=M(za)?'copy':'none'}function Q(ya){ya.preventDefault(),ya.stopPropagation(),xa=0,wa.classList.add('fx-fade-hidden');var za=ya.dataTransfer;if(M(za)){var Aa=function(){function Ba(Ha){var Ia=Ha.match(/^data:([^;]+)/i);if(Ia){var Ka=Ia[1];return /^image\//i.test(Ka)?/^\/png/i.test(Ka)?299:290:/^application(\/octet-stream)?$/i.test(Ka)?280:/^multipart\/?$/i.test(Ka)?270:-1}if(!/^https?:\/\//.test(Ha))return-1;var Ja=Ha.match(/^[^:]+:\/\/[^#?]+\/[^/#?]*(\.[^./]*(?=[#?]|$))/);if(Ja&&Ja[1]){var Ka=Ja[1].toLowerCase().replace(/:.*/,'');switch(Ka){case'.png':return 190;case'.gif':case'.webp':return 180;case'.bmp':case'.jpg':case'.jpeg':case'.tif':case'.tiff':return 100;}}return-1}var Ca=za.files,Da=za.items,Ea=Array.from(Ca).find(function(Ha){return /^image\//i.test(Ha.type)});if(Ea)return Ea;var Fa=Array.from(Da).find(function(Ha){return /^image\//i.test(Ha.type)});if(Fa)return Fa.getAsFile();var Ga=(za.getData('text/uri-list')||'').split('\n').filter(function(Ha){return Ha&&'#'!==Ha[0]});return Ga.sort(function(Ha,Ia){return Ba(Ia)-Ba(Ha)}),Ga[0]&&0<=Ba(Ga[0])?Ga[0]:null}();Aa&&('string'==typeof Aa?L(Aa):L(Aa,Aa.name||'?'))}}var R=document.getElementById('error-container');window.onerror=function(ya,za,Aa,Ba){document.getElementById('error-summary').innerText='An error has occurred in '+za+' at #'+Aa+':'+Ba,document.getElementById('error-detail').innerText=ya,R.classList.remove('fx-fade-hidden')};var S=[/^data:/i],T=[/^https?:\/\/crossorigin\.me(\/|$)/i,/^https?:\/\/cors-anywhere\.herokuapp\.com(\/|$)/i],U=['SSL',['crossorigin.me (SSL)','https://crossorigin.me/%u'],['CORS Anywhere (SSL)','https://cors-anywhere.herokuapp.com/%u'],'Non-SSL',['crossorigin.me (Non-SSL)','http://crossorigin.me/%u'],['CORS Anywhere (Non-SSL)','http://cors-anywhere.herokuapp.com/%u'],'Other',['No CORS proxy: Access directly','%u']],V=q('defaultProtocol','http://'),W=q('defaultCORSProxy',1,j),X=q('useHashString',!0),Y=q('backgroundColor','#F5F5F5'),Z=q('checkeredSize',11,function(ya){return'number'==typeof ya&&!isNaN(ya)&&isFinite(ya)&&0<ya}),$=q('checkeredColor1','#FFF'),_=q('checkeredColor2','#EEE'),aa=document.getElementById('error-container'),ba=document.getElementById('retry-with-message'),ca=document.getElementById('retry-with-selector');(function(){var ya;U.forEach(function(za,Aa){var Ba='object'===('undefined'==typeof za?'undefined':_typeof(za));if(Ba){var Ca=document.createElement('option');Ca.value=Aa,Ca.innerText=za[0],(ya||ca).appendChild(Ca)}else ya&&ca.appendChild(ya),za?(ya=document.createElement('optgroup'),ya.label=za):ya=void 0}),ya&&ca.appendChild(ya)})(),ca.addEventListener('change',function(){var za=parseInt(ca.value,10);j(za)&&(f('defaultCORSProxy',za),L(sa.url,za))});var da=document.documentElement,ea=document.getElementById('page-interface'),fa=document.getElementById('input-file'),ga=document.getElementById('form-url-input'),ha=document.getElementById('input-url'),ia=document.getElementById('input-background-color'),ja=document.getElementById('input-checkered-size'),ka=document.getElementById('input-checkered-color-1'),la=document.getElementById('input-checkered-color-2');fa.addEventListener('change',function(){var za=fa.files[0];L(za)}),ga.addEventListener('submit',function(ya){ya.preventDefault(),ya.stopPropagation();ga.checkValidity()&&L(ha.value)}),[['--background-color',ia],['--checkered-size',ja],['--checkered-color-1',ka],['--checkered-color-2',la]].forEach(function(ya){function Aa(Ga){if('number'===Ea.type){if(!Ga)return 0;var Ha=parseInt(Ga,10);return isNaN(Ha)||!isFinite(Ha)?0:Ha}return Ga}function Ba(Ga){return'number'==typeof Ga?Ga?Ga+'px':'0':Ga}function Ca(){var Ga=Aa(Ea.value);f(Fa,Ga),da.style.setProperty(Da,Ba(Ga))}var Da=ya[0],Ea=ya[1],Fa=h(Da);Ea.value=function(Ga){return'number'===Ea.type?Ga:'color'===Ea.type&&/^#[\da-f]{3}$/i.test(Ga)?'#'+Ga[1]+Ga[1]+Ga[2]+Ga[2]+Ga[3]+Ga[3]:Ga}(g(Fa)),Ea.addEventListener('change',Ca),Ea.addEventListener('keyup',Ca),Ca()});var ma=document.getElementById('page-app'),na=document.getElementById('spinner'),oa=document.getElementById('image-source'),pa=document.getElementById('image-result');[oa,pa].forEach(function(ya,za,Aa){var Ba=Aa[1-za];ya.addEventListener('click',function(){Ba.classList.remove('fx-fade-hidden'),ya.classList.add('fx-fade-hidden')})});var qa=void 0,ra=void 0,sa=H();window.addEventListener('popstate',function(){I()});var ta=document.getElementsByClassName('back-to-top-button'),ua=document.getElementsByClassName('reload-button');Array.from(ua).forEach(function(ya){ya.addEventListener('click',function(){K()})}),Array.from(ta).forEach(function(ya){ya.addEventListener('click',function(){J()})});var va=document.getElementById('pages'),wa=document.getElementById('drop-overlay'),xa=0;[va,wa].forEach(function(ya){ya.addEventListener('dragenter',N),ya.addEventListener('dragleave',O),ya.addEventListener('dragover',P),ya.addEventListener('drop',Q)}),Array.from(document.querySelectorAll('.no-drop')).forEach(function(ya){ya.addEventListener('dragover',function(za){za.preventDefault(),za.stopPropagation();var Aa=za.dataTransfer;Aa.dropEffect=Aa.effectAllowed='none'}),ya.addEventListener('drop',function(za){za.preventDefault(),za.stopPropagation()})}),I()})();
//# sourceMappingURL=app.js.map